* C:\Users\beia\Documents\GitHub\Bird_Detector\LTSpice_simulations\power_switching.asc
M1 N001 Vcc_USB BATT_in BATT_in PMOS
V§Solar VCC_solar 0 PWL(0 6 0.1 15 0.2 15 0.3 0)
VBus Vcc_USB 0 0 Rser=0.01
M2 N001 N004 VCC_solar VCC_solar PMOS
R1 N004 0 1k
R2 Vcc_USB 0 100k
D1 Vcc_USB BATT_in D
R3 BATT_in 0 10
V§Li_ion_cells BATT_out 0 PWL(0 4.2 0.3 4.2 0.5 2.4) Rser=0.075
M3 N002 Vcc_USB N003 N003 PMOS
M4 N002 BMS_signal BATT_out BATT_out PMOS
R4 BMS_signal 0 100k
R5 Vcc_USB 0 100k
D2 Vcc_USB N003 D
R6 N003 0 10
M5 N008 Vcc_USB BATT_in BATT_in PMOS
M6 N008 N011 VCC_solar VCC_solar PMOS
R7 N011 0 1k
R8 Vcc_USB 0 100k
R9 BATT_in 0 10
M7 N009 Vcc_USB N010 N010 PMOS
M8 N009 BMS_signal BATT_out BATT_out PMOS
R10 BMS_signal 0 100k
R11 Vcc_USB 0 100k
R12 N010 0 10
M9 BATT_in 0 Vcc_USB Vcc_USB NMOS
M10 N010 Vcc_USB Vcc_USB Vcc_USB NMOS
XU1 N007 BATT_out N006 0 BMS_signal LT1001
V1 N007 0 3
V2 N006 0 3
R13 N005 0 1
V3 N005 0 if(V(BATT_OUT)< 3,V(BATT_OUT),0)
.model D D
.lib C:\Users\tehnic\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\tehnic\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 0.5 startup
.lib LTC.lib
.backanno
.end
